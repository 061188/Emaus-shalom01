<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Shalon/Emaus - Quebra-Cabeça</title>
<style>
    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
        font-family: Arial, sans-serif;
        background-color: #f0f0f0;
    }
    h2 {
        text-align: center;
        margin: 10px;
    }
    #puzzle-container {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(4, 1fr);
        width: 100vw;
        height: calc(100vh - 100px);
        margin: auto;
        gap: 2px;
    }
    .tile {
        background-image: url('data:image/jpeg;base64,PASTE_BASE64_HERE');
        background-size: 400% 400%;
        width: 100%;
        height: 100%;
        cursor: pointer;
    }
    #controls {
        text-align: center;
        margin-top: 10px;
    }
    button {
        padding: 10px 20px;
        font-size: 18px;
        cursor: pointer;
    }
    #message {
        text-align: center;
        margin-top: 10px;
        font-size: 18px;
        color: #333;
    }
</style>
</head>
<body>
<h2>Monte a imagem do grupo</h2>
<div id="puzzle-container"></div>
<div id="controls">
    <button onclick="checkWin()">Verificar</button>
</div>
<div id="message"></div>

<script>
    const puzzleContainer = document.getElementById("puzzle-container");
    const message = document.getElementById("message");
    const size = 4;
    let positions = [];

    function initPuzzle() {
        positions = [];
        for (let i = 0; i < size * size; i++) positions.push(i);
        shuffleArray(positions);

        puzzleContainer.innerHTML = "";
        for (let i = 0; i < positions.length; i++) {
            const pos = positions[i];
            const x = pos % size;
            const y = Math.floor(pos / size);

            const tile = document.createElement("div");
            tile.className = "tile";
            tile.style.backgroundPosition = `${(x * 100 / (size - 1))}% ${(y * 100 / (size - 1))}%`;
            tile.dataset.index = pos;
            tile.addEventListener("click", () => swapTile(i));
            puzzleContainer.appendChild(tile);
        }
    }

    function swapTile(index) {
        const emptyIndex = positions.indexOf(size * size - 1);
        if (isAdjacent(index, emptyIndex)) {
            [positions[index], positions[emptyIndex]] = [positions[emptyIndex], positions[index]];
            initPuzzle();
        }
    }

    function isAdjacent(i1, i2) {
        const x1 = i1 % size, y1 = Math.floor(i1 / size);
        const x2 = i2 % size, y2 = Math.floor(i2 / size);
        return (Math.abs(x1 - x2) + Math.abs(y1 - y2)) === 1;
    }

    function checkWin() {
        for (let i = 0; i < positions.length; i++) {
            if (positions[i] !== i) {
                message.textContent = "Ainda não está certo. Tente novamente!";
                return;
            }
        }
        message.textContent = "Parabéns! Você completou o quebra-cabeça!";
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    initPuzzle();
</script>
</body>
</html>
